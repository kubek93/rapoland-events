---
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
  const posts = await Astro.glob('../../content/news/*.md');
  return posts.map(post => ({
    params: { slug: post.file.split('/').pop().replace('.md', '') }
  }));
}

const { slug } = Astro.params;
const post = (await Astro.glob('../../content/news/*.md'))
  .find(item => item.file.split('/').pop().replace('.md', '') === slug);

if (!post) {
  throw new Error('Post not found');
}

const { title, date, category, description } = post.frontmatter;
---
<Layout title={title}>
    <div class="gap-8 mt-12">
        <p class="text-gray-400 mb-2">{new Date(date).toLocaleDateString('pl-PL')}</p>
        <p class="mb-4">Kategoria: <span class="font-semibold">{category}</span></p>


        <p class="mb-8">{description}</p>

        <a href="/news" class="text-primary underline">Powr√≥t do listy</a>
    </div>
</Layout>
